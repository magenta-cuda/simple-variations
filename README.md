# simple-variations

Simple Variations for WooCommerce implements the variations of a WooCommerce variable product as the Cartesian product of its attributes.  Some new techniques were found to overcome some difficulties with WordPress. I implemented a technique for wrapping WordPress’s actions and filters. This allows the pre-processing of the arguments to and the post-processing of the result from a call to a hook in the context of the wrapper. I further found a technique for postponing the call to wp_die() so the wrapped hook returns to the wrapper instead of exiting. WooCommerce is inconsistent in instantiating some classes – some times it uses a factory and other times it directly uses “new Some_Class( … )”. This makes it difficult to use subclassing as a means to override the methods of some classes. This was solved using some ugly ad hoc techniques that work. Further, since the Cartesian product may have a really huge number of variations and processing these variations may exceed PHP’s execution time limit, it was necessary to implement a way for a single task to span multiple PHP sessions. Lastly, I wrote a proprietary implementation of virtual variations where the variations are dynamically computed from its components.

Simple Variations uses the variation attributes of a Classic Commerce variable product to specify the components of a composite product. Since the properties of a specific variation of a composite product can be derived from the properties of the specific components that form the variation, the variation does not need to exists in the database but can be generated dynamically from the components. For example, consider ordering a custom made hamburger where the customer can choose from different types of meats, buns and cheeses. The price of the chosen hamburger would be the sum of the prices of the selected meat, bun and cheese. So, instead of specifying the price for the Cartesian product of the components only the price of the individual components need to be specified. Similiarly, the in stock quantity would be the minimum of the in stock quantities of the selected components. Since the composite variations are virtual  (I.e. – They don’t really exists but are dynamically generated as needed.), this extension can very efficiently (constant time O(1) and constant storage O(1) with respect to n number of variations) support up to 8,192 products each of which can have up to 562,949,953,421,312 variations.
